<template>
  <main class="c-main">
    <form @submit.prevent="loadSvg" class="c-search">
      <div class="c-input">
        <input type="text" v-model="search" />
        <img
          src="data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.206 12.617L14.296 15.703C14.686 16.099 15.316 16.099 15.706 15.703C16.098 15.308 16.098 14.669 15.706 14.273L12.626 11.193C13.496 10.025 14.013 8.577 14.013 7.007C14.013 3.137 10.876 0 7.007 0C3.137 0 0 3.137 0 7.007C0 10.877 3.137 14.014 7.007 14.014C8.582 14.014 10.036 13.494 11.206 12.617ZM7.006 12.012C4.243 12.012 2.002 9.772 2.002 7.007C2.002 4.243 4.242 2.002 7.007 2.002C9.771 2.002 12.011 4.242 12.011 7.007C12.011 9.771 9.771 12.012 7.008 12.012H7.006Z' fill='%23111111' fill-opacity='0.48'/%3E%3C/svg%3E%0A"
          alt=""
        />
      </div>
      <button type="submit">Search</button>
    </form>
    <div class="c-body">
      <div v-if="search" class="c-logos">
        <div v-if="loading">
          loading...
        </div>
        <div v-else>
          <div class="c-grid" v-if="logosArray.length">
            <div
              class="c-grid__box"
              v-for="(item, index) in logosArray"
              :key="index"
            >
              <div class="c-company">
                <h5 class="c-company__category">Financial Services</h5>

                <div class="c-company__icon">
                  <svg
                    width="87"
                    height="87"
                    viewBox="0 0 87 87"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path d="M0 0H87V87H0V0Z" fill="#C7001D" />
                    <path
                      d="M46.3048 66.0028C46.3048 66.1223 46.3188 66.2343 46.3467 66.3385C46.3773 66.4403 46.4205 66.5293 46.4765 66.6056C46.5325 66.6794 46.6024 66.738 46.6864 66.7812C46.7703 66.8244 46.8657 66.846 46.9725 66.846C47.064 66.8471 47.1547 66.8302 47.2396 66.7964C47.321 66.7609 47.3923 66.7099 47.4533 66.6438C47.5144 66.5777 47.5614 66.4976 47.5945 66.4034C47.6301 66.3068 47.6479 66.1961 47.6479 66.0714C47.6537 65.9548 47.6435 65.838 47.6174 65.7242C47.5919 65.6148 47.5513 65.5194 47.4953 65.438C47.4399 65.3572 47.3651 65.2916 47.2778 65.2472C47.1913 65.1988 47.0896 65.1747 46.9725 65.1747C46.8741 65.1733 46.7769 65.1969 46.6902 65.2434C46.608 65.2873 46.5364 65.3484 46.4803 65.4227C46.4216 65.502 46.3776 65.5912 46.3506 65.686C46.32 65.7852 46.3048 65.8909 46.3048 66.0028ZM46.3048 66.9987H46.0758V64.2513H46.3048V65.3388C46.3785 65.2167 46.4791 65.1251 46.6062 65.0641C46.7319 65.0014 46.8703 64.9688 47.0107 64.9687C47.1607 64.9687 47.2905 64.998 47.3999 65.0564C47.5085 65.1097 47.6027 65.1882 47.6746 65.2854C47.7507 65.3841 47.8065 65.497 47.8387 65.6174C47.8743 65.7445 47.8921 65.8768 47.8921 66.0142C47.8921 66.1592 47.8757 66.2953 47.8425 66.4225C47.8094 66.5496 47.756 66.6603 47.6823 66.7545C47.6091 66.8476 47.515 66.9221 47.4075 66.972C47.2957 67.0254 47.1595 67.0521 46.9992 67.0521C46.9356 67.0521 46.8707 67.0432 46.8046 67.0254C46.7372 67.007 46.672 66.9815 46.61 66.9491C46.5481 66.9154 46.4905 66.8744 46.4383 66.827C46.3872 66.7756 46.3446 66.7164 46.3124 66.6514H46.3048V66.9987ZM48.3665 67.5367L48.4581 67.552C48.4912 67.557 48.5242 67.5596 48.5573 67.5596C48.621 67.5596 48.673 67.5393 48.7138 67.4985C48.7545 67.4578 48.7875 67.4082 48.813 67.3497C48.8415 67.2922 48.8645 67.2322 48.8817 67.1704C48.8995 67.1093 48.9198 67.0571 48.9427 67.0139L48.1757 65.0221H48.4314L49.0648 66.7201L49.6982 65.0221H49.9463L49.2098 66.972C49.164 67.0967 49.1195 67.2085 49.0763 67.3078C49.0355 67.407 48.9911 67.4909 48.9427 67.5596C48.8969 67.6309 48.8447 67.6843 48.7863 67.7199C48.7302 67.758 48.6629 67.7771 48.584 67.7771C48.5433 67.7771 48.5039 67.7745 48.4657 67.7695C48.4324 67.7648 48.3992 67.7585 48.3665 67.7504V67.5367ZM53.542 66.6324H53.5496L54.1487 64.2513H54.4158L53.6946 66.9987H53.4084L52.7712 64.5718H52.7635L52.1263 66.9987H51.8401L51.1304 64.2513H51.3898L51.9813 66.6324H51.9889L52.6262 64.2513H52.9162L53.542 66.6324ZM54.777 66.9987V64.2513H56.6048V64.4726H55.0365V65.4647H56.4522V65.686H55.0365V66.7774H56.643V66.9987H54.777ZM57.0983 66.9987V64.2513H57.4951L58.3956 66.6743H58.4033L59.2885 64.2513H59.6816V66.9987H59.4221V64.5489H59.4144L58.5139 66.9987H58.2697L57.3654 64.5489H57.3577V66.9987H57.0983ZM60.0364 66.9987L61.1163 64.2513H61.4101L62.4633 66.9987H62.1962L61.8794 66.1363H60.6279L60.3035 66.9987H60.0364ZM60.7156 65.915H61.7917L61.2537 64.4726L60.7156 65.915ZM29.4665 60.0312H26.8699L26.4726 60.8934H24.5737V60.6463L27.7613 53.8789H28.5945L31.748 60.6463V60.8934H29.8734L29.4665 60.0312ZM28.1682 56.8339L27.4513 58.5101H28.89L28.1682 56.8339ZM38.0466 53.9467V59.2657H40.5609V60.8934H36.2349V53.9467H38.0466ZM50.2192 60.0312H47.6227L47.2254 60.8934H45.3266V60.6463L48.5141 53.8789H49.3473L52.5009 60.6463V60.8934H50.6261L50.2192 60.0312ZM48.921 56.8339L48.204 58.5101H49.6428L48.921 56.8339ZM58.75 55.5356H57.0448V53.9467H62.2039V55.5356H60.5085V60.8934H58.75V55.5356ZM21.2158 49.1473H44.2675C44.7212 49.1473 45.0164 48.6698 44.8136 48.2638L44.3395 47.3158L43.3474 45.5605L43.2963 45.4753C43.242 45.3849 43.1653 45.3101 43.0735 45.2582C42.9818 45.2062 42.8782 45.1789 42.7727 45.1789H28.1602C27.688 45.1789 27.3945 44.6656 27.6343 44.2586L37.1776 28.0553C37.4129 27.6559 37.9902 27.6541 38.2278 28.0521L50.6487 48.8499C50.7028 48.9406 50.7796 49.0156 50.8715 49.0678C50.9633 49.1199 51.0672 49.1473 51.1728 49.1473H65.3372C65.8071 49.1473 66.1009 48.6385 65.8659 48.2316L48.9421 18.9263C48.8885 18.8335 48.8114 18.7564 48.7186 18.7028C48.6258 18.6492 48.5205 18.621 48.4134 18.621H45.3788C44.9129 18.621 44.6187 19.1218 44.8456 19.5289L58.6386 44.2711C58.8656 44.6781 58.5713 45.1789 58.1055 45.1789H53.5429C53.4361 45.1789 53.3313 45.151 53.2387 45.0978C53.1462 45.0446 53.0692 44.968 53.0155 44.8758L38.3345 19.6873C38.2808 19.5951 38.2038 19.5185 38.1113 19.4653C38.0188 19.4122 37.9139 19.3842 37.8072 19.3842H37.7458C37.639 19.3842 37.5341 19.4122 37.4415 19.4655C37.3489 19.5187 37.2719 19.5953 37.2182 19.6876L20.6882 48.0891C20.6339 48.1824 20.6053 48.2883 20.6053 48.3962V48.5368C20.6053 48.6987 20.6696 48.854 20.7841 48.9685C20.8986 49.083 21.0539 49.1473 21.2158 49.1473Z"
                      fill="white"
                    />
                  </svg>
                </div>

                <a
                  href="https://abeg.app/"
                  target="_blank"
                  class="c-company__website"
                >
                  Visit Website
                </a>
              </div>

              <div class="c-overlay">
                <button>Import SVG</button>
              </div>
            </div>
          </div>
          <h4 class="c-empty" v-if="!logosArray.length && searched">
            Your search returned no results
          </h4>
        </div>
      </div>
      <welcome v-else />
    </div>
  </main>
</template>

<script>
import '../figma/figma-ds/js/selectMenu';
import '../figma/figma-ds/js/iconInput';
import '../figma/figma-ds/js/disclosure';
import axios from 'axios';

import Welcome from './components/Welcome';

export default {
  data() {
    return {
      search: '',
      loading: false,
      searched: false,
      logosArray: [...new Array(20)],
      baseUrl: 'https://nigerialogos.com'
    };
  },

  components: {
    Welcome
  },

  async mounted() {
    // Initialize the figma-ds components
    window.selectMenu.init();
    window.iconInput.init();
    window.disclosure.init();

    try {
      const res = await axios.get(`${this.baseUrl}/logos.json`);
      console.log(res);
    } catch (error) {
      console.log(error);
    }

    window.onmessage = event => {
      const { type, name, data } = event.data.pluginMessage;

      //  recieve data
      if (type === 'event-name') {
        console.log('event called');
      }
    };
  },
  methods: {
    buttonClick() {
      parent.postMessage(
        {
          pluginMessage: {
            type: 'event-click'
          }
        },
        '*'
      );
    },
    async loadSvg() {
      // https://nigerialogos.com/logos/${name}/${name}.svg
    }
  }
};
</script>

<style lang="scss">
@import '../figma/figma-ds/figma-plugin-ds';
</style>
